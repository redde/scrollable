/*! Scrollable - v0.1.0 - 2014-03-10
* https://github.com/konstantingorozankin/scrollable
* Copyright (c) 2014 Konstantin Gorozhankin; Licensed MIT */
(function(){(function(t){var i;return t.fn.extend({scrollable:function(e,s,n){return this.each(function(){var o,r;return"string"==typeof e?(o=t.data(this,"scrollable"),o[e].apply(o,[s,n])):r=new i(this,e,s)})}}),i=function(){function i(i,e,s){this.root=i,t.extend(this,s),this.init(e),t.data(i,"scrollable",this)}return i.prototype.init=function(i){var e,s;return s=this,e={size:1,activeClass:"_active",speed:600,onSeek:null,naviPage:!1,rolling:!0,width:200,item_margin:0,items:".__scrollable",item:".item",prevClass:"prev",nextClass:"next",navi:".navi"},this.opts=t.extend(e,i),this.wrap=t(this.root).find(this.opts.items),this.items=this.wrap.find(this.opts.item),this.index=0,this.items.bind("click.scrollable",function(i){return s.click(t(this).index()),i.preventDefault()}),this.getStatus().length>this.opts.size?this.initNavi():void 0},i.prototype.initNavi=function(){var i,e,s,n,o=this;return n=this,this.navi={},e=this.opts.naviPage?"Page":"",this.navi.prev=t("<a href='javascript:void(0);' />").addClass(this.opts.prevClass).appendTo(this.root).click(function(){return o["prev"+e]()}),this.navi.next=t("<a href='javascript:void(0);' />").addClass(this.opts.nextClass).appendTo(this.root).click(function(){return o["next"+e]()}),s=this.getStatus(),i=Math.ceil(s.length/this.opts.size),i?(this.navi.box=t(this.opts.navi,this.root).html(t.map(Array(i),function(t){return"<a class='navi__link' href='javascript:void(0);'>"+t+"</a>"}).join("")).on("click","a",function(){return n.setPage(t(this).index())}),this.navi.items=this.navi.box.find("a"),this.updateNavi()):void 0},i.prototype.updateNavi=function(){var t;return this.opts.rolling?!1:(t=this.getStatus(),this.navi.items.removeClass("is-active").eq(t.page).addClass("is-active"),this.navi.next.css("visibility","visible"),this.navi.prev.css("visibility","visible"),0===t.index&&this.navi.prev.css("visibility","hidden"),t.index>=t.length-t.size?this.navi.next.css("visibility","hidden"):void 0)},i.prototype.update=function(i){return t.extend(this.opts,i),this.itemRoot.css({width:this.opts.size*this.opts.width+(this.opts.size-1)*this.opts.item_margin}),this.seekTo(this.index,this.opts.speed)},i.prototype.click=function(t){var i;return i=this.opts.activeClass,this.wrap.children().removeClass(i).eq(t).addClass(i)},i.prototype.getStatus=function(){var t,i;return t=this.items.size(),i={length:t,index:this.index,size:this.opts.size,pages:Math.floor(t/this.opts.size),page:Math.ceil(this.index/this.opts.size)}},i.prototype._seekToPositive=function(t,i){var e,s,n,o=this;return e=this.wrap.children().slice(0,-t),e.clone(!0,!0).appendTo(this.wrap),s=this.wrap.children().eq(i),n=-s.position().left,this.index=i+t,[{left:n},function(){return e.remove(),o.wrap.css("left",-s.position().left)}]},i.prototype._seekToNegative=function(t){var i,e;return i=this.wrap.children().slice(t),i.clone(!0,!0).prependTo(this.wrap),e=this.wrap.children().eq(0),this.wrap.css("left",-this.wrap.children().eq(this.index-t).position().left),this.index=0,[{left:0},function(){return i.remove()}]},i.prototype._seekTo=function(t){var i,e;return 0>t?this._seekToNegative(t):0>(i=this.items.length-t-this.opts.size)?this._seekToPositive(i,t):(e=this.wrap.children().eq(t),this.index=t,[{left:-e.position().left}])},i.prototype.seekTo=function(t,i){var e;return null==i&&(i=this.opts.speed),this.wrap.stop(!0,!0),this.opts.rolling||(0>t&&(t=0),t=Math.min(t,this.items.length-this.opts.size)),e=this._seekTo(t),e.slice(1,0,i),this.wrap.animate.apply(this.wrap,e),this.updateNavi()},i.prototype.move=function(t,i){return this.seekTo(this.index+t,i)},i.prototype.next=function(t){return this.move(1,t)},i.prototype.prev=function(t){return this.move(-1,t)},i.prototype.movePage=function(t,i){return this.move(this.opts.size*t,i)},i.prototype.setPage=function(t,i){return this.seekTo(this.opts.size*t,i)},i.prototype.prevPage=function(t){return this.seekTo(this.index-this.opts.size,t)},i.prototype.nextPage=function(t){return this.seekTo(this.index+this.opts.size,t)},i.prototype.begin=function(t){return this.seekTo(0,t)},i.prototype.end=function(t){return this.seekTo(this.items.size()-this.opts.size,t)},i}()})(jQuery)}).call(this);