/*! Scrollable - v0.1.0 - 2013-08-29
* https://github.com/konstantingorozankin/scrollable
* Copyright (c) 2013 Konstantin Gorozhankin; Licensed MIT */
(function(){window.Scrollable=void 0,function(t){var e;return t.fn.extend({scrollable:function(i,s,n){return this.each(function(){var o,r;return"string"==typeof i?(o=t.data(this,"scrollable"),o[i].apply(o,[s,n])):r=new e(this,i,s)})}}),e=function(e,i,s){return this.me=e,t.extend(this,s),this.init(i),t.data(e,"scrollable",this)},e.prototype={init:function(e){var i,s,n,o;return o=this,s={size:1,activeClass:"active",speed:600,onSeek:null,naviPage:!1,rolling:!0,cycleRolling:!1,width:200,item_margin:0,items:".items",prev:"prev",next:"next",navi:".navi",naviItem:"span"},this.opts=t.extend(s,e),n=this.root=t(o.me),i=this.itemRoot=t(s.items,n),i.length||(i=n),this.wrap=i.children(":first"),this.items=this.wrap.children(),this.index=0,this.getStatus().length<=this.opts.size?!1:(this.items.each(function(e){return t(this).bind("click.scrollable",function(t){return o.click(e),t.preventDefault()})}),this.activeIndex=0,t("<a href='#' />").addClass(s.prev).appendTo(this.root).click(function(t){return s.naviPage?o.prevPage():o.prev(),t.preventDefault()}),t("<a href='#' />").addClass(s.next).appendTo(this.root).click(function(t){return s.naviPage?o.nextPage():o.next(),t.preventDefault()}))},update:function(e){return t.extend(this.opts,e),this.itemRoot.css({width:this.opts.size*this.opts.width+(this.opts.size-1)*this.opts.item_margin}),this.seekTo(this.index,this.opts.speed)},click:function(t){var e,i,s;return e=this.items.eq(t),i=this.opts.activeClass,!e.hasClass(i)&&(t>=0||this.items.size()>t)?(s=this.items.eq(this.activeIndex).removeClass(i),e.addClass(i),this.seekTo(t-Math.floor(this.opts.size/2)),this.activeIndex=t):void 0},getStatus:function(){var t,e;return t=this.items.size(),e={length:t,index:this.index,size:this.opts.size,pages:Math.floor(t/this.opts.size),page:Math.floor(this.index/this.opts.size)}},seekTo:function(t,e){var i,s,n,o,r,h,a;return this.wrap.stop(!0,!0),i=function(){},a=this,o=this.wrap.children().eq(t),r=void 0,n=void 0,s=this.items.length-t-this.opts.size,console.log("balance: "+s+"; index: "+t),0>s?(n=this.wrap.children().slice(0,-s),n.clone(!0,!0).appendTo(this.wrap),o=this.wrap.children().eq(t),h=this.wrap.css("left"),r=-o.position().left,i=function(){return n.remove(),console.log(t,s,o.position().left),a.wrap.css("left",-o.position().left)}):0>t?(n=this.wrap.children().slice(t),n.clone(!0,!0).prependTo(this.wrap),o=this.wrap.children().eq(0),console.log(t,-this.wrap.children().eq(this.index-t).position().left),this.wrap.css("left",-this.wrap.children().eq(this.index-t).position().left),r=0,i=function(){return n.remove()},this.index=0):(o=this.wrap.children().eq(t),r=-o.position().left,this.index=t),this.wrap.animate({left:r},e||this.opts.speed,i),!1},move:function(t,e){return this.seekTo(this.index+t,e)},next:function(t){return this.move(1,t)},prev:function(t){return this.move(-1,t)},movePage:function(t,e){return this.move(this.opts.size*t,e)},setPage:function(t,e){return this.seekTo(this.opts.size*t,e)},prevPage:function(t){return this.seekTo(this.index-this.opts.size,t)},nextPage:function(t){return this.seekTo(this.index+this.opts.size,t)},begin:function(t){return this.seekTo(0,t)},end:function(t){return this.seekTo(this.items.size()-this.opts.size,t)}}}(jQuery)}).call(this);